<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>tatami: tatami/ext/MatrixMarket_layered.hpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">tatami
   </div>
   <div id="projectbrief">C++ API for different matrix representations</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_7c74ace1909d0ad6f313cc91d6fa66af.html">tatami</a></li><li class="navelem"><a class="el" href="dir_d150a8c9e059c5b80d37182ce62240de.html">ext</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">MatrixMarket_layered.hpp File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Create a layered sparse matrix from the Matrix Market coordinate format.  
<a href="#details">More...</a></p>

<p><a href="MatrixMarket__layered_8hpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2f4f1f9c5f4d8216082df388615450ea"><td class="memTemplParams" colspan="2">template&lt;typename T  = double, typename IDX  = int&gt; </td></tr>
<tr class="memitem:a2f4f1f9c5f4d8216082df388615450ea"><td class="memTemplItemLeft" align="right" valign="top">LayeredMatrixData&lt; T, IDX &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="MatrixMarket__layered_8hpp.html#a2f4f1f9c5f4d8216082df388615450ea">tatami::MatrixMarket::load_layered_sparse_matrix</a> (const char *filepath, size_t bufsize=65536)</td></tr>
<tr class="separator:a2f4f1f9c5f4d8216082df388615450ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a096857b5e1ff25b92479cbd510343626"><td class="memTemplParams" colspan="2">template&lt;typename T  = double, typename IDX  = int, typename B &gt; </td></tr>
<tr class="memitem:a096857b5e1ff25b92479cbd510343626"><td class="memTemplItemLeft" align="right" valign="top">LayeredMatrixData&lt; T, IDX &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="MatrixMarket__layered_8hpp.html#a096857b5e1ff25b92479cbd510343626">tatami::MatrixMarket::load_layered_sparse_matrix_from_buffer</a> (const B *buffer, size_t n)</td></tr>
<tr class="separator:a096857b5e1ff25b92479cbd510343626"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ea0ccd9a65c82bde2a3ced643ad0375"><td class="memTemplParams" colspan="2">template&lt;typename T  = double, typename IDX  = int&gt; </td></tr>
<tr class="memitem:a3ea0ccd9a65c82bde2a3ced643ad0375"><td class="memTemplItemLeft" align="right" valign="top">LayeredMatrixData&lt; T, IDX &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="MatrixMarket__layered_8hpp.html#a3ea0ccd9a65c82bde2a3ced643ad0375">tatami::MatrixMarket::load_layered_sparse_matrix_gzip</a> (const char *filepath, int bufsize=65536)</td></tr>
<tr class="separator:a3ea0ccd9a65c82bde2a3ced643ad0375"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2141872c08eb8a61ca7e37ff4804e85e"><td class="memTemplParams" colspan="2">template&lt;typename T  = double, typename IDX  = int&gt; </td></tr>
<tr class="memitem:a2141872c08eb8a61ca7e37ff4804e85e"><td class="memTemplItemLeft" align="right" valign="top">LayeredMatrixData&lt; T, IDX &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="MatrixMarket__layered_8hpp.html#a2141872c08eb8a61ca7e37ff4804e85e">tatami::MatrixMarket::load_layered_sparse_matrix_from_buffer_gzip</a> (const unsigned char *buffer, size_t n, size_t bufsize=65536)</td></tr>
<tr class="separator:a2141872c08eb8a61ca7e37ff4804e85e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >Create a layered sparse matrix from the Matrix Market coordinate format. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a2f4f1f9c5f4d8216082df388615450ea" name="a2f4f1f9c5f4d8216082df388615450ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f4f1f9c5f4d8216082df388615450ea">&#9670;&nbsp;</a></span>load_layered_sparse_matrix()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T  = double, typename IDX  = int&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">LayeredMatrixData&lt; T, IDX &gt; tatami::MatrixMarket::load_layered_sparse_matrix </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bufsize</em> = <code>65536</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filepath</td><td>Path to a Matrix Market file. The file should contain integer data in the coordinate format, stored in text without any compression. </td></tr>
    <tr><td class="paramname">bufsize</td><td>Size of the buffer (in bytes) to use when reading from file.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <code>LayeredMatrixData</code> object.</dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>Type of value in the <code><a class="el" href="classtatami_1_1Matrix.html" title="Virtual class for a matrix with a defined type.">tatami::Matrix</a></code> interface. </td></tr>
    <tr><td class="paramname">IDX</td><td>Integer type for the index.</td></tr>
  </table>
  </dd>
</dl>
<p>This function loads a layered sparse integer matrix from a Matrix Market coordinate file. The aim is to reduce memory usage by storing each gene's counts in the smallest unsigned integer type that can hold them. See the documentation for <code>LayeredMatrixData</code> for more details.</p>
<p >On a related note, this function will automatically use <code>uint16_t</code> values to store the internal row indices if the number of rows is less than 65536. This aims to further reduce memory usage in most cases, e.g., gene count matrices usually have fewer than 50000 rows. Note that the internal storage is orthogonal to the choice of <code>IDX</code> in the <code><a class="el" href="classtatami_1_1Matrix.html" title="Virtual class for a matrix with a defined type.">tatami::Matrix</a></code> interface. </p>

</div>
</div>
<a id="a096857b5e1ff25b92479cbd510343626" name="a096857b5e1ff25b92479cbd510343626"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a096857b5e1ff25b92479cbd510343626">&#9670;&nbsp;</a></span>load_layered_sparse_matrix_from_buffer()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T  = double, typename IDX  = int, typename B &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">LayeredMatrixData&lt; T, IDX &gt; tatami::MatrixMarket::load_layered_sparse_matrix_from_buffer </td>
          <td>(</td>
          <td class="paramtype">const B *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Array containing the contents of a Matrix Market file. The file should contain integer data in the coordinate format, stored in text without any compression. </td></tr>
    <tr><td class="paramname">n</td><td>Length of the array.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <code>LayeredMatrixData</code> object.</dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>Type of value in the <code><a class="el" href="classtatami_1_1Matrix.html" title="Virtual class for a matrix with a defined type.">tatami::Matrix</a></code> interface. </td></tr>
    <tr><td class="paramname">IDX</td><td>Integer type for the index. </td></tr>
    <tr><td class="paramname">B</td><td>Type of the buffer, usually <code>char</code> or <code>unsigned char</code>.</td></tr>
  </table>
  </dd>
</dl>
<p>This is equivalent to <code><a class="el" href="MatrixMarket__layered_8hpp.html#a2f4f1f9c5f4d8216082df388615450ea">load_layered_sparse_matrix()</a></code> but assumes that the entire file has been read into <code>buffer</code>. </p>

</div>
</div>
<a id="a2141872c08eb8a61ca7e37ff4804e85e" name="a2141872c08eb8a61ca7e37ff4804e85e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2141872c08eb8a61ca7e37ff4804e85e">&#9670;&nbsp;</a></span>load_layered_sparse_matrix_from_buffer_gzip()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T  = double, typename IDX  = int&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">LayeredMatrixData&lt; T, IDX &gt; tatami::MatrixMarket::load_layered_sparse_matrix_from_buffer_gzip </td>
          <td>(</td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>bufsize</em> = <code>65536</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>Array containing the contents of a Matrix Market file. The file should contain integer data in the coordinate format, stored in text without any compression. </td></tr>
    <tr><td class="paramname">n</td><td>Length of the array. </td></tr>
    <tr><td class="paramname">bufsize</td><td>Size of the buffer to use for decompression, in bytes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <code>LayeredMatrixData</code> object.</dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>Type of value in the <code><a class="el" href="classtatami_1_1Matrix.html" title="Virtual class for a matrix with a defined type.">tatami::Matrix</a></code> interface. </td></tr>
    <tr><td class="paramname">IDX</td><td>Integer type for the index.</td></tr>
  </table>
  </dd>
</dl>
<p>This is equivalent to <code><a class="el" href="MatrixMarket__layered_8hpp.html#a3ea0ccd9a65c82bde2a3ced643ad0375">load_layered_sparse_matrix_gzip()</a></code> but assumes that the entire file has been read into <code>buffer</code>. </p>

</div>
</div>
<a id="a3ea0ccd9a65c82bde2a3ced643ad0375" name="a3ea0ccd9a65c82bde2a3ced643ad0375"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ea0ccd9a65c82bde2a3ced643ad0375">&#9670;&nbsp;</a></span>load_layered_sparse_matrix_gzip()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename T  = double, typename IDX  = int&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">LayeredMatrixData&lt; T, IDX &gt; tatami::MatrixMarket::load_layered_sparse_matrix_gzip </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filepath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>bufsize</em> = <code>65536</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filepath</td><td>Path to a Matrix Market file. The file should contain integer data in the coordinate format, stored with Gzip compression. </td></tr>
    <tr><td class="paramname">bufsize</td><td>Size of the buffer to use for decompression, in bytes.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A <code>LayeredMatrixData</code> object.</dd></dl>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>Type of value in the <code><a class="el" href="classtatami_1_1Matrix.html" title="Virtual class for a matrix with a defined type.">tatami::Matrix</a></code> interface. </td></tr>
    <tr><td class="paramname">IDX</td><td>Integer type for the index.</td></tr>
  </table>
  </dd>
</dl>
<p>This is a version of <code><a class="el" href="MatrixMarket__layered_8hpp.html#a2f4f1f9c5f4d8216082df388615450ea">load_layered_sparse_matrix()</a></code> for loading in Gzip-compressed Matrix Market files. To make this function available, make sure to define <code>TATAMI_USE_ZLIB</code> and compile with <b>zlib</b> support. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2
</small></address>
</body>
</html>
